import{r as R,v as P,n as O,d as v,u as f,o as u,c as _,a as p,b as S,E as j,e as I,f as y,w as c,g as l,h as k,i as W,j as D,k as F,l as T,F as b,m as E,p as B,q as V,s as H,t as M,x as q,y as K,z as x,A as z,B as G,C as U,D as J,G as Q,H as X,I as Y,J as Z,K as ee,L as te,M as ne,N as ae,O as oe}from"./vendor.1ce0d0f6.js";const se=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerpolicy&&(r.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?r.credentials="include":a.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(a){if(a.ep)return;a.ep=!0;const r=t(a);fetch(a.href,r)}};se();function re(o={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:n,onRegistered:a,onRegisterError:r}=o;let s,d;const m=async(i=!0)=>{i&&(s==null||s.addEventListener("controlling",h=>{h.isUpdate&&window.location.reload()})),d&&d.waiting&&await O(d.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){s=new P("./sw.js",{scope:"./",type:"classic"}),s.addEventListener("activated",i=>{i.isUpdate||n==null||n()});{const i=()=>{t==null||t()};s.addEventListener("waiting",i),s.addEventListener("externalwaiting",i)}s.register({immediate:e}).then(i=>{d=i,a==null||a(i)}).catch(i=>{r==null||r(i)})}return m}function le(o={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:n,onRegistered:a,onRegisterError:r}=o,s=R(!1),d=R(!1);return{updateServiceWorker:re({immediate:e,onNeedRefresh(){s.value=!0,t==null||t()},onOfflineReady(){d.value=!0,n==null||n()},onRegistered:a,onRegisterError:r}),offlineReady:d,needRefresh:s}}var $=(o,e)=>{const t=o.__vccOpts||o;for(const[n,a]of e)t[n]=a;return t};const ie={key:0,class:"pwa-toast",role:"alert"},ce={class:"message"},de={key:0},ue={key:1},fe=v({setup(o){const{offlineReady:e,needRefresh:t,updateServiceWorker:n}=le(),a=async()=>{e.value=!1,t.value=!1};return(r,s)=>f(e)||f(t)?(u(),_("div",ie,[p("div",ce,[f(e)?(u(),_("span",de," App ready to work offline ")):(u(),_("span",ue," New content available, click on reload button to update. "))]),f(t)?(u(),_("button",{key:0,onClick:s[0]||(s[0]=d=>f(n)())},"Reload")):S("",!0),p("button",{onClick:a},"Close")])):S("",!0)}});var _e=$(fe,[["__scopeId","data-v-4a6319f6"]]);const me={},pe=k("\u9996\u9875"),he=k("\u52A8\u6001"),be=k("RSS\u8BA2\u9605");function ge(o,e){const t=j,n=I;return u(),y(n,{class:"el-menu-demo",mode:"horizontal",router:""},{default:c(()=>[l(t,{index:"/"},{default:c(()=>[pe]),_:1}),l(t,{index:"/dynamic"},{default:c(()=>[he]),_:1}),l(t,{index:"/rss"},{default:c(()=>[be]),_:1})]),_:1})}var ve=$(me,[["render",ge]]);const L=W("main",{state:()=>({loading:{articles:!0,dynamics:!0,fans:!0,schedules:!0},select:!0,articles:[],dynamics:{bilibili:{official:[],ava:[],bella:[],carol:[],diana:[],eileen:[]},weibo:{official:[],ava:[],bella:[],carol:[],diana:[],eileen:[]},douyin:{official:[]}},fans:{official:[],ava:[],bella:[],carol:[],diana:[],eileen:[]}}),actions:{updateArticle(o){this.articles=o},updateDynamic(o,e,t){this.dynamics[o][e]=t},updateFan(o,e){this.fans[o]=e}},getters:{getArticles(o){let e=[{link:"https://space.bilibili.com/703007996/article",image:"https://i0.hdslb.com/bfs/article/80d3563014013b213b1623f61d24af5fa0ef32d5.png@700w_200h_progressive.webp"}];for(let t in o.articles)if(e.push({link:o.articles[t].link,image:o.articles[t].description.match(/<img.*?src="(.*?)"/)[1]+"@700w_200h_progressive.webp"}),e.length==5)break;return e},getDynamics(o){let e,t,n=[];for(e in o.dynamics)for(t in o.dynamics[e])n=n.concat(o.dynamics[e][t]);return n},getFans(o){const e={official:"https://i2.hdslb.com/bfs/face/43b21998da8e7e210340333f46d4e2ae7ec046eb.jpg",ava:"https://i0.hdslb.com/bfs/face/566078c52b408571d8ae5e3bcdf57b2283024c27.jpg",bella:"https://i2.hdslb.com/bfs/face/668af440f8a8065743d3fa79cfa8f017905d0065.jpg",carol:"https://i1.hdslb.com/bfs/face/a7fea00016a8d3ffb015b6ed8647cc3ed89cbc63.jpg",diana:"https://i2.hdslb.com/bfs/face/d399d6f5cf7943a996ae96999ba3e6ae2a2988de.jpg",eileen:"https://i1.hdslb.com/bfs/face/8895c87082beba1355ea4bc7f91f2786ef49e354.jpg"};let t,n=[];for(t in o.fans){let a=[],r=o.fans[t][0].description.match(/<br>总计(.*)/)[1];for(let s in o.fans[t])if(a.push(o.fans[t][s].title.match(/新粉丝 (.*)/)[1]),a.length==3)break;n.push({avatar:e[t]+"@240w_240h_1c_1s.webp",count:r,followers:a})}return n},getSchedules(o){for(let e in o.articles)if(o.dynamics.weibo.official[e].description.match(/日程表/)[0])return{link:o.dynamics.weibo.official[e].link,image:o.dynamics.weibo.official[e].description.match(/<img.*?src="(.*?)"/)[1]};return{link:"a",image:"a"}}}}),ye=p("div",null,"\u5F15\u6D41\u5730\u5740",-1),we=v({setup(o){const e=L();let t,n;const a=[];for(t in e.dynamics){const r=[];for(n in e.dynamics[t])r.push({label:n,disabled:!1});a.push({label:t,children:r})}return(r,s)=>{const d=D,m=F,i=T;return u(),_(b,null,[ye,l(i,{type:"border-card"},{default:c(()=>[(u(),_(b,null,E(a,h=>l(m,{label:h.label},{default:c(()=>[(u(!0),_(b,null,E(h.children,w=>(u(),y(d,{label:w.label},null,8,["label"]))),256))]),_:2},1032,["label"])),64))]),_:1})],64)}}});const ke=v({setup(o){return(e,t)=>{const n=B,a=q("router-view"),r=V,s=H,d=M;return u(),_(b,null,[l(_e),l(s,null,{default:c(()=>[l(s,null,{default:c(()=>[l(n,null,{default:c(()=>[l(ve)]),_:1}),l(r,null,{default:c(()=>[l(a)]),_:1})]),_:1}),l(d,{width:"250px"},{default:c(()=>[l(we)]),_:1})]),_:1})],64)}}}),Ee="modulepreload",C={},xe="./",A=function(e,t){return!t||t.length===0?e():Promise.all(t.map(n=>{if(n=`${xe}${n}`,n in C)return;C[n]=!0;const a=n.endsWith(".css"),r=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${r}`))return;const s=document.createElement("link");if(s.rel=a?"stylesheet":Ee,a||(s.as="script",s.crossOrigin=""),s.href=n,document.head.appendChild(s),a)return new Promise((d,m)=>{s.addEventListener("load",d),s.addEventListener("error",m)})})).then(()=>e())},Re=["href"],Se=["src"],$e=["href"],Le=["src"],Ce=v({setup(o){const e=L();let t;return K(async()=>{try{e.updateArticle((await x("https://rss.asoul.info/bilibili/user/article/703007996",{})).items)}catch(n){console.log(n)}e.loading.articles=!1;try{e.updateDynamic("weibo","official",(await x("https://rss.asoul.info/weibo/official",{})).items)}catch(n){console.log(n)}e.loading.schedules=!1,console.log(e.getSchedules);for(t in e.fans)try{e.updateFan(t,(await x("https://rss.asoul.info/fans/"+t,{})).items)}catch(n){console.log(n)}e.loading.fans=!1}),(n,a)=>{const r=z,s=G,d=Z,m=U,i=J,h=Q,w=ee,N=X;return u(),_(b,null,[Y((u(),y(s,{trigger:"click"},{default:c(()=>[(u(!0),_(b,null,E(f(e).getArticles,g=>(u(),y(r,null,{default:c(()=>[p("a",{target:"_blank",href:g.link},[p("img",{src:g.image},null,8,Se)],8,Re)]),_:2},1024))),256))]),_:1})),[[N,f(e).loading.articles]]),l(w,{loading:f(e).loading.fans,animated:""},{template:c(()=>[l(d,{variant:"image",style:{width:"240px",height:"240px"}})]),default:c(()=>[l(h,{data:f(e).getFans,style:{width:"100%"}},{default:c(()=>[l(i,{label:"member"},{default:c(g=>[l(m,{src:g.row.avatar},null,8,["src"])]),_:1}),l(i,{prop:"count",label:"count"}),l(i,{prop:"followers",label:"new followers"})]),_:1},8,["data"])]),_:1},8,["loading"]),p("a",{target:"_blank",href:f(e).getSchedules.link},[p("img",{src:f(e).getSchedules.image},null,8,Le)],8,$e)],64)}}}),Ae=[{path:"/",component:Ce},{path:"/dynamic",component:()=>A(()=>import("./Dynamic.e88fb9aa.js"),["assets/Dynamic.e88fb9aa.js","assets/Dynamic.30dd97a3.css","assets/vendor.1ce0d0f6.js","assets/vendor.dedc2a55.css"])},{path:"/rss",component:()=>A(()=>import("./RSSHub.03fb0ab1.js"),["assets/RSSHub.03fb0ab1.js","assets/vendor.1ce0d0f6.js","assets/vendor.dedc2a55.css"])}],Ne=te({history:ne(),routes:Ae});ae(ke).use(Ne).use(oe()).mount("#app");export{$ as _,L as u};
